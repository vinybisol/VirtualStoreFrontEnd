<app-ecommerce-header></app-ecommerce-header>

<div *ngIf="count$ | async as products; else loading">
  <div class="card-box">
    <mat-card class="card" *ngFor="let product of products.products">
      <mat-card-title class="card-title">{{
        product.shortName
      }}</mat-card-title>
      <mat-card-subtitle>{{ product.name }}</mat-card-subtitle>

      <mat-card-content>
        <div class="div__image">
          <img
            class="mdc-card__sem__media"
            *ngIf="product.images?.length === 0"
            src="assets\ecommerce\semimagem.png"
            alt="sem imagem"
          />
          <img
            class="mdc-card__media"
            *ngFor="let image of product.images"
            src="{{ 'data:image/jpg;base64,' + image.image }}"
            alt="Photo of a Shiba Inu"
          />
        </div>
      </mat-card-content>

      <mat-card-title>
        {{ product.price | currency : "BRL" }}
      </mat-card-title>

      <mat-card-subtitle>
        {{ product.priceMarket | currency : "BRL" }}
        <small>valor de mercado</small>
      </mat-card-subtitle>

      <mat-card-content>
        {{ product.note }}
      </mat-card-content>

      <mat-card-actions>
        <button mat-button (click)="goTo(product.key!)">Detalhes</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>

<!--Loading-->
<ng-template #loading>
  <app-mat-spinner-overlay></app-mat-spinner-overlay>
</ng-template>
