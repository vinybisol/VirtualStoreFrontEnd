<div *ngIf="loading">
  <app-mat-spinner-overlay></app-mat-spinner-overlay>
</div>
<form class="example-form" [formGroup]="form">
  <!-- Nome Curto -->
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Nome Curto</mat-label>
    <input
      type="text"
      matInput
      maxlength="20"
      formControlName="shortName"
      [errorStateMatcher]="matcher"
      placeholder="Ex. Roteador"
    />
    <mat-error>
      Nome é <strong>obrigátorio</strong>, Insira de 3 a 20 caracteres
    </mat-error>
  </mat-form-field>

  <!-- Nome-->
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Nome</mat-label>
    <input
      type="text"
      matInput
      maxlength="20"
      formControlName="name"
      [errorStateMatcher]="matcher"
      placeholder="Ex. Roteador Wireless"
    />
    <mat-error>
      Nome é <strong>obrigátorio</strong>, Insira de 3 a 20 caracteres
    </mat-error>
  </mat-form-field>

  <!-- Preço-->
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Preço</mat-label>
    <input
      type="number"
      lang="pt-br"
      matInput
      formControlName="price"
      [errorStateMatcher]="matcher"
      placeholder="Ex. R$ 10,00"
    />
    <mat-error>
      Preço é <strong>obrigátorio</strong>, Insira de 0,01 a 9999,99 caracteres
    </mat-error>
  </mat-form-field>

  <!-- Preço Mercado-->
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Preço de mercado</mat-label>
    <input
      type="number"
      lang="pt-br"
      matInput
      formControlName="priceMarket"
      [errorStateMatcher]="matcher"
      placeholder="Ex. R$ 10,00"
    />
    <mat-error> Insira de 0,01 a 9999,99 caracteres </mat-error>
  </mat-form-field>

  <!-- Note -->
  <mat-form-field class="example-full-width" appearance="fill">
    <mat-label>Observação</mat-label>
    <input
      type="text"
      lang="pt-br"
      matInput
      formControlName="note"
      [errorStateMatcher]="matcher"
      placeholder="Ex. Venda com o conjunto"
    />
    <mat-error>
      Quantidade é <strong>obrigátorio</strong>, Insira de 1 a 9999 caracteres
    </mat-error>
  </mat-form-field>

  <!-- Upload Imagem -->

  <div class="upload-container">
    <button
      mat-fab
      color="primary"
      type="button"
      mat-raised-button
      (click)="fileInput.click()"
    >
      <mat-icon *ngIf="!hasImage">arrow_upward</mat-icon>
      <mat-icon *ngIf="hasImage">check</mat-icon>
    </button>
    <mat-label> Upload imagen</mat-label>
    <input
      hidden
      (change)="onFileSelected($event)"
      #fileInput
      type="file"
      multiple
      accept="image/*"
    />
  </div>
</form>

<div class="back-button-container">
  <button
    *ngIf="form.valid"
    mat-fab
    color="primary"
    class="button"
    (click)="save()"
    aria-label="add button"
  >
    <mat-icon>save</mat-icon>
  </button>
  <br />
  <button
    mat-fab
    color="primary"
    class="button"
    (click)="goBack()"
    aria-label="add button"
  >
    <mat-icon>clear</mat-icon>
  </button>
</div>
